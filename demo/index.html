<!doctype html>
<html lang="en">
<head>
    <title>Alerts Demo</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="elements.css" />
    <style>
      .target {margin-left:20px;}
    </style>
</head>
<body>

    <div id="demo-target1"></div>

    <h1 class="target">Alerts Demo</h1>
    <p class="target">Styled using the Elements SDK.</p>

    <button class="target pe-btn__primary" onclick="buttonHandler('success')">Success Alert</button>
    <br />
    <br />
    <button class="target pe-btn__primary" onclick="buttonHandler('error')">Error Alert</button>
    <br />
    <br />
    <br />
    <br />
    <button class="target pe-btn_cta--btn_xlarge" onclick="buttonHandler('clear')">Clear Alert</button>

    <script>
      function buttonHandler(type) {
// ========EVENT API FOR INTERACTING WITH THE COMPONENT=========================
//
// To trigger an alert...
// - dispatch 'triggerAlert' event with valid type and message
//   valid type is success or error... so far.
// - dispatch 'clearAlert' to clear the array of events
//
// ** Consumer must polyfill CustomEvent **
// -----------------------------------------------------------------------------
// @param detail       <Object> on event (ie. ref e.detail)
// @param alertList    <Array>  array of event Objects (ie. [{},{},...])
// @param alertType    <String> 'success' || 'error'
// @param alertMessage <String> 'user specified string'
// -----------------------------------------------------------------------------
          if(type == 'success' || type == 'error') {
            document.body.dispatchEvent(new CustomEvent('triggerAlert', {
                "detail":{
                  "alertList":[{
                    "alertType"   : type,
                    "alertMessage": type + ' test message'
                  }]
                }
            }));
          }

          if(type == 'clear') {
            document.body.dispatchEvent(new CustomEvent('clearAlert'));
          }
// =============================================================================
        console.log(type + " alertTriggered!")
      }
    </script>

    <script>
      if (document.body.children[0].nodeName !== 'svg') {
        var pe_ajax = new XMLHttpRequest();
        pe_ajax.open("GET", "../node_modules/pearson-elements/dist/icons/p-icons-sprite-1.1.svg", true);
        pe_ajax.responseType = "document";
        pe_ajax.onload = function(e) {
          document.body.insertBefore(
            pe_ajax.responseXML.documentElement,
            document.body.childNodes[0]
          );
        }
        pe_ajax.send();
      }
    </script>

    <!-- External dependencies for React -->
    <script src="../node_modules/react/dist/react.js"></script>
    <script src="../node_modules/react-dom/dist/react-dom.js"></script>
    <!-- CustomEvent polyfill is for IE, Intl.js polyfill is for Safari -->
    <script src="https://cdn.polyfill.io/v2/polyfill.js?features=CustomEvent,Intl.~locale.en,Intl.~locale.fr"></script>
    <!-- Locally hosted demo server -->
    <script src="http://localhost:8081/webpack-dev-server.js"></script>
    <!-- Demo build of component -->
    <script src="../build/dev.alerts.js"></script>
</body>
</html>
